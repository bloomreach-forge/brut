<!DOCTYPE html>
    <!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 at $dateFormat.format( $currentDate ) 
 | Rendered using Bloomreach Forge Maven Skin 3.2.1 based on Apache Maven Fluido Skin
-->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="" lang="">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                      <meta http-equiv="Content-Language" content="" />
      <title>BRUT Quick Reference Guide â€“ B.R.U.T: BloomReach Unit Testing for brXM Delivery Tier</title>
  <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-3.2.1.min.css"/>
  <link rel="stylesheet" href="./css/forge-maven-skin-3.2.1.min.css"/>
  <link rel="stylesheet" href="./css/site.css" />
  <link rel="stylesheet" href="./css/print.css" media="print" />
  <link rel="icon" type="image/png" href="./images/skin/logo_64.png" sizes="64x64">

  
  <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-3.2.1.min.js"></script>
  <script type="text/javascript" src="./js/forge-maven-skin-3.2.1.min.js"></script>

            <style>.github-fork-ribbon:before { background-color: green; }</style>
</head>
<body class="topBarDisabled">
              <a target="_blank" class="github-fork-ribbon right" href="https://github.com/bloomreach-forge/brut"
     data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
          <div class="container-fluid">
  <div id="banner">
    <div id="logo">
                        <a href="https://bloomreach-forge.github.io">
        <img src="./images/skin/logo.png" alt="Bloomreach Forge Logo" />
      </a>
    </div>
    <div class="pull-left">                    <h1>        Bloomreach Unit Testing Library
        </h1>            </div>
    <div class="pull-right"></div>
    <div class="clear"><hr/></div>
  </div>

  <div id="breadcrumbs">
                            <div class="links">
      <a href="https://xmdocumentation.bloomreach.com">xmdocumentation.bloomreach.com</a>
      <a href="https://github.com/bloomreach-forge">github.com/bloomreach-forge</a>
    </div>
    <ul class="breadcrumb">
    
  <li id="publishDate">published: $dateValue  
  </li>
  
        
            </ul>
    <div class="clear"><hr/></div>
  </div>
<div class="row-fluid">
  <div id="leftColumn" class="span2">
    <div class="well sidebar-nav">
    
    <ul class="nav nav-list">
            <li class="nav-header">Getting Started</li>
              <li>  <a href="index.html" title="Home">  <span class="none"></span>  Home</a>  </li>
        <li>  <a href="install.html" title="Installation">  <span class="none"></span>  Installation</a>  </li>
        <li>  <a href="getting-started.html" title="Quick Start">  <span class="none"></span>  Quick Start</a>  </li>
                  <li class="nav-header">Testing Guides</li>
              <li>  <a href="testing/jaxrs-testing.html" title="JAX-RS Testing">  <span class="none"></span>  JAX-RS Testing</a>  </li>
        <li>  <a href="testing/pagemodel-testing.html" title="Page Model Testing">  <span class="none"></span>  Page Model Testing</a>  </li>
        <li>  <a href="testing/component-testing.html" title="Component Testing">  <span class="none"></span>  Component Testing</a>  </li>
        <li>  <a href="testing/stubbing-data.html" title="Test Data (YAML)">  <span class="none"></span>  Test Data (YAML)</a>  </li>
                  <li class="nav-header">Patterns</li>
              <li>  <a href="patterns/authentication.html" title="Authentication">  <span class="none"></span>  Authentication</a>  </li>
        <li>  <a href="patterns/common-patterns.html" title="Common Patterns">  <span class="none"></span>  Common Patterns</a>  </li>
                  <li class="nav-header">Reference</li>
              <li class="active">  <a href="#"><span class="none"></span>Quick Reference</a>
  </li>
        <li>  <a href="config-service-repository.html" title="ConfigService Repository">  <span class="none"></span>  ConfigService Repository</a>  </li>
        <li>  <a href="architecture.html" title="Architecture">  <span class="none"></span>  Architecture</a>  </li>
        <li>  <a href="troubleshooting.html" title="Troubleshooting">  <span class="none"></span>  Troubleshooting</a>  </li>
        <li>  <a href="legacy-api.html" title="Legacy API">  <span class="none"></span>  Legacy API</a>  </li>
        <li>  <a href="apidocs/index.html" title="JavaDocs">  <span class="none"></span>  JavaDocs</a>  </li>
                  <li class="nav-header">Project</li>
              <li>  <a href="demoproject.html" title="Demo Project">  <span class="none"></span>  Demo Project</a>  </li>
        <li>  <a href="release-notes.html" title="Release Notes">  <span class="none"></span>  Release Notes</a>  </li>
        </ul>
    
          <hr />
      <div id="poweredBy">
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
                <div class="clear"></div>
          <a href="http://maven.apache.org/" title="$i18n.getString( "site-renderer", $locale, "template.builtby" ) Maven" class="poweredBy">  <img class="builtBy" alt="$i18n.getString( "site-renderer", $locale, "template.builtby" ) Maven" src="./images/logos/maven-feather.png" />  </a>
        </div>
    </div>
  </div>
  <div id="bodyColumn"  class="span10" >
    
  

    <section><a id="Quick_Reference_Guide"></a>
<h1>Quick Reference Guide</h1>

      <section><a id="a1._Add_Dependencies"></a>
<h2>1. Add Dependencies</h2>
        
<div class="brush: xml">
          
<pre><code>
&lt;!-- JUnit 5 (Required for annotation-based testing) --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
  &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;
  &lt;version&gt;5.10.2&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- For JAX-RS / Page Model API Testing --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.bloomreach.forge.brut&lt;/groupId&gt;
  &lt;artifactId&gt;brut-resources&lt;/artifactId&gt;
  &lt;version&gt;${brut.version}&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- For Component Testing --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.bloomreach.forge.brut&lt;/groupId&gt;
  &lt;artifactId&gt;brut-components&lt;/artifactId&gt;
  &lt;version&gt;${brut.version}&lt;/version&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
          </code></pre>
        </div>
        
<p><strong>Warning: <code>&lt;scope&gt;test&lt;/scope&gt;</code> is required.</strong>
           BRUT replaces core HST beans (pipelines, component manager, link creator, etc.) with test-oriented
           implementations. If BRUT is on the runtime classpath without test scope, its mock beans will shadow
           production beans and real HST endpoints will stop working.</p>
        
<p><strong>Note:</strong> Most brXM projects already include JUnit 5 via the parent POM.</p>
      </section>

      <section><a id="a2._Create_Your_First_Test"></a>
<h2>2. Create Your First Test</h2>

        <section><section><a id="JAX-RS_API_Test_.28Parameter_Injection_-_Recommended.29"></a>
<h4>JAX-RS API Test (Parameter Injection - Recommended)</h4>
        
<div class="brush: java">
          
<pre><code>
package org.example;

import org.bloomreach.forge.brut.resources.annotation.BrxmJaxrsTest;
import org.bloomreach.forge.brut.resources.annotation.DynamicJaxrsTest;
import org.example.rest.HelloResource;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

@BrxmJaxrsTest(resources = {HelloResource.class})  // beanPackages auto-detected!
public class MyApiTest {

    @Test
    void testEndpoint(DynamicJaxrsTest brxm) {  // Parameter injection - no IDE warnings!
        String response = brxm.request()
            .get(&quot;/site/api/hello/world&quot;)
            .execute();
        assertEquals(&quot;Hello, World!&quot;, response);
    }
}
          </code></pre>
        </div>

        </section><section><a id="Page_Model_API_Test"></a>
<h4>Page Model API Test</h4>
        
<div class="brush: java">
          
<pre><code>
package org.example;

import org.bloomreach.forge.brut.resources.annotation.BrxmPageModelTest;
import org.bloomreach.forge.brut.resources.annotation.DynamicPageModelTest;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

@BrxmPageModelTest  // Zero-config for standard project layouts
public class MyPageModelTest {

    @Test
    void testComponent(DynamicPageModelTest brxm) {
        PageModelResponse pageModel = brxm.request()
            .get(&quot;/site/resourceapi/news&quot;)
            .executeAsPageModel();
        assertNotNull(pageModel.getRootComponent());
    }
}
          </code></pre>
        </div>

        </section><section><a id="Component_Test"></a>
<h4>Component Test</h4>
        
<div class="brush: java">
          
<pre><code>
package org.example;

import org.bloomreach.forge.brut.components.annotation.BrxmComponentTest;
import org.bloomreach.forge.brut.components.annotation.DynamicComponentTest;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

@BrxmComponentTest  // beanPackages, nodeTypes auto-detected
public class MyComponentTest {

    @Test
    void testComponent(DynamicComponentTest brxm) {
        assertNotNull(brxm.getHstRequest());
        assertNotNull(brxm.getHstResponse());
        assertTrue(brxm.getRootNode().hasNode(&quot;hippo:configuration&quot;));
    }
}
          </code></pre>
        </div>
        
<p><strong>Node Type Auto-Detection:</strong> When <code>nodeTypes</code> is not specified,
           types are automatically detected from <code>@Node(jcrType=&quot;...&quot;)</code> annotations in bean classes.
           Use explicit <code>nodeTypes</code> only for inheritance (<code>&quot;ns:Child extends ns:Parent&quot;</code>)
           or types outside scanned packages.</p>

        </section><section><a id="Alternative.3A_Field_Injection_.28for_.40BeforeEach_or_Nested_Classes.29"></a>
<h4>Alternative: Field Injection (for @BeforeEach or Nested Classes)</h4>
        
<div class="brush: java">
          
<pre><code>
@BrxmJaxrsTest(resources = {HelloResource.class})
public class MyApiTest {

    @SuppressWarnings(&quot;unused&quot;)  // Injected by extension
    private DynamicJaxrsTest brxm;

    @BeforeEach
    void setup() {
        brxm.getHstRequest().setHeader(&quot;X-Custom&quot;, &quot;value&quot;);
    }

    @Test
    void testEndpoint() {
        brxm.request().get(&quot;/site/api/hello&quot;).assertBody(&quot;Hello&quot;);
    }
}
          </code></pre>
        </div>
      </section></section></section>

      <section><a id="a3._Configuration_Options"></a>
<h2>3. Configuration Options</h2>

        <section><section><a id="JAX-RS_Test_.28Minimal_-_Zero_Config.29"></a>
<h4>JAX-RS Test (Minimal - Zero Config)</h4>
        
<div class="brush: java">
          
<pre><code>
@BrxmJaxrsTest(resources = {HelloResource.class, NewsResource.class})
// beanPackages auto-detected from project-settings.xml or pom.xml
          </code></pre>
        </div>

        </section><section><a id="Full_Options_.28all_optional.29"></a>
<h4>Full Options (all optional)</h4>
        
<div class="brush: java">
          
<pre><code>
@BrxmJaxrsTest(
    // Optional: Override auto-detected bean packages
    beanPackages = {&quot;org.example.model&quot;},

    // JAX-RS resources (recommended - eliminates Spring XML)
    resources = {HelloResource.class},

    // Custom YAML patterns (auto-detected from &lt;package&gt;/imports/)
    yamlPatterns = {&quot;classpath*:custom/**/*.yaml&quot;},

    // Custom CND patterns
    cndPatterns = {&quot;classpath*:custom/**/*.cnd&quot;},

    // Load production HCM content
    loadProjectContent = true,

    // Override auto-detected values
    hstRoot = &quot;/hst:myproject&quot;,
    springConfigs = {&quot;/org/example/custom.xml&quot;},
    addonModules = {&quot;/org/example/addon&quot;}
)
          </code></pre>
        </div>

        </section><section><a id="When_to_Configure_Manually"></a>
<h4>When to Configure Manually</h4>
        
<p><strong>Use zero-config (recommended) when:</strong></p>
        
<ul>
          
<li>Project has <code>project-settings.xml</code> &#x2192; beanPackages auto-detected</li>
          
<li>Test YAML is in <code>&lt;package&gt;/imports/</code> &#x2192; auto-detected</li>
          
<li>HST root matches Maven artifactId &#x2192; auto-detected</li>
        </ul>
        
<p><strong>Specify parameters when:</strong></p>
        
<ul>
          
<li><code>beanPackages</code> - auto-detection fails or you need different packages</li>
          
<li><code>resources</code> - to register JAX-RS endpoints without Spring XML</li>
          
<li><code>springConfigs</code> - resources need Spring-managed dependencies</li>
          
<li><code>hstRoot</code> - HST root doesn't match Maven artifactId</li>
        </ul>

        </section><section><a id="a.40BrxmComponentTest_Options"></a>
<h4>@BrxmComponentTest Options</h4>
        
<div class="brush: java">
          
<pre><code>
@BrxmComponentTest(
    beanPackages = {&quot;org.example.beans&quot;},
    content = &quot;/test-content.yaml&quot;,    // YAML content to import
    contentRoot = &quot;/content/documents&quot;, // Where to import + sets site base
    nodeTypes = {&quot;ns:Type extends ns:Base&quot;} // Optional - auto-detected from @Node
)
          </code></pre>
        </div>
      </section></section></section>

      <section><a id="a4._Fluent_Request_API"></a>
<h2>4. Fluent Request API</h2>

        <section><section><a id="Basic_Requests"></a>
<h4>Basic Requests</h4>
        
<div class="brush: java">
          
<pre><code>
@Test
void testWithFluentApi(DynamicJaxrsTest brxm) {
    String response = brxm.request()
        .get(&quot;/site/api/news&quot;)              // Sets URI and GET method
        .withHeader(&quot;X-Custom&quot;, &quot;value&quot;)    // Add custom header
        .queryParam(&quot;category&quot;, &quot;tech&quot;)     // Add query parameter
        .execute();                         // Execute and get response as String

    assertTrue(response.contains(&quot;news&quot;));
}

// One-liner assertion
@Test
void testAssertBody(DynamicJaxrsTest brxm) {
    brxm.request()
        .get(&quot;/site/api/hello/world&quot;)
        .assertBody(&quot;Hello, World!&quot;);       // Assert response body directly
}
          </code></pre>
        </div>

        </section><section><a id="Typed_JSON_Responses"></a>
<h4>Typed JSON Responses</h4>
        
<div class="brush: java">
          
<pre><code>
// JSON deserialization in one line
@Test
void testTypedResponse(DynamicJaxrsTest brxm) {
    User user = brxm.request()
        .get(&quot;/site/api/user/123&quot;)
        .executeAs(User.class);             // Execute and deserialize JSON

    assertEquals(&quot;John&quot;, user.getName());
}

// Response with status code
@Test
void testResponseWithStatus(DynamicJaxrsTest brxm) {
    Response&lt;User&gt; response = brxm.request()
        .get(&quot;/site/api/users/123&quot;)
        .executeWithStatus(User.class);     // Get status + typed body

    assertEquals(200, response.status());
    assertTrue(response.isSuccessful());
    assertEquals(&quot;John&quot;, response.body().getName());
}
          </code></pre>
        </div>

        </section><section><a id="POST_with_JSON_Body"></a>
<h4>POST with JSON Body</h4>
        
<div class="brush: java">
          
<pre><code>
// POST with JSON string
@Test
void testPostRequest(DynamicJaxrsTest brxm) {
    User created = brxm.request()
        .post(&quot;/site/api/users&quot;)
        .withJsonBody(&quot;{\&quot;name\&quot;: \&quot;John\&quot;}&quot;)  // Sets body + Content-Type
        .executeAs(User.class);

    assertEquals(&quot;John&quot;, created.getName());
}

// POST with object serialization
@Test
void testPostWithObject(DynamicJaxrsTest brxm) {
    User input = new User(&quot;Jane&quot;, 25);
    User created = brxm.request()
        .post(&quot;/site/api/users&quot;)
        .withJsonBody(input)                   // Auto-serializes to JSON
        .executeAs(User.class);

    assertEquals(&quot;Jane&quot;, created.getName());
}
          </code></pre>
        </div>

        </section><section><a id="Authentication"></a>
<h4>Authentication</h4>
        
<div class="brush: java">
          
<pre><code>
// Authenticated user with roles
@Test
void testProtectedEndpoint(DynamicJaxrsTest brxm) {
    String response = brxm.request()
        .get(&quot;/site/api/admin/users&quot;)
        .asUser(&quot;admin&quot;, &quot;admin&quot;, &quot;editor&quot;)  // username, roles...
        .execute();

    assertThat(response).contains(&quot;users&quot;);
}

// Role-only (no username needed)
@Test
void testRoleBasedAccess(DynamicJaxrsTest brxm) {
    String response = brxm.request()
        .get(&quot;/site/api/reports&quot;)
        .withRole(&quot;manager&quot;, &quot;viewer&quot;)       // roles only
        .execute();

    assertThat(response).contains(&quot;reports&quot;);
}
          </code></pre>
        </div>

        </section><section><a id="PageModel_API"></a>
<h4>PageModel API</h4>
        
<div class="brush: java">
          
<pre><code>
@Test
void testPageModelApi(DynamicPageModelTest brxm) throws Exception {
    PageModelResponse pageModel = brxm.request()
        .get(&quot;/site/resourceapi/&quot;)
        .executeAsPageModel();  // Parse response as PageModelResponse

    // Navigate component tree
    PageComponent root = pageModel.getRootComponent();
    assertNotNull(root);

    // Find component by name
    PageComponent header = pageModel.findComponentByName(&quot;header&quot;).orElseThrow();

    // Get children
    List&lt;PageComponent&gt; children = pageModel.getChildComponents(root);
}
          </code></pre>
        </div>

        </section><section><a id="Repository_Access"></a>
<h4>Repository Access</h4>
        
<div class="brush: java">
          
<pre><code>
@Test
void testRepositoryAccess(DynamicJaxrsTest brxm) {
    try (RepositorySession session = brxm.repository()) {
        session.assertNodeExists(&quot;/hst:myproject&quot;)
               .assertNodeExists(&quot;/hippo:configuration&quot;);

        Node newsNode = session.getNode(&quot;/content/documents/news&quot;);
        assertEquals(&quot;hippo:handle&quot;, newsNode.getPrimaryNodeType().getName());
    }
    // Auto-cleanup on try-with-resources exit
}
          </code></pre>
        </div>
      </section></section></section>

      <section><a id="a5._Component_Test_Patterns"></a>
<h2>5. Component Test Patterns</h2>

        <section><section><a id="Annotation-Driven_Setup"></a>
<h4>Annotation-Driven Setup</h4>
        
<div class="brush: java">
          
<pre><code>
@BrxmComponentTest(
    beanPackages = {&quot;org.example.beans&quot;},
    content = &quot;/test-content.yaml&quot;,
    contentRoot = &quot;/content/documents/myproject&quot;
)
class MyComponentTest {

    @Test
    void testComponent(DynamicComponentTest brxm) {
        // Node types auto-detected from @Node annotations!
        // Content imported automatically from annotation parameters
        MyComponent component = new MyComponent();
        component.init(null, brxm.getComponentConfiguration());
        component.doBeforeRender(brxm.getHstRequest(), brxm.getHstResponse());

        MyModel model = brxm.getRequestAttributeValue(&quot;model&quot;);
        assertNotNull(model);
    }
}
          </code></pre>
        </div>

        </section><section><a id="Mocking_Component_Parameters"></a>
<h4>Mocking Component Parameters</h4>
        
<div class="brush: java">
          
<pre><code>
@Test
void testComponentWithParameters(DynamicComponentTest brxm) {
    // Mock the ParameterInfo interface
    MyComponentInfo paramInfo = mock(MyComponentInfo.class);
    when(paramInfo.getDocument()).thenReturn(&quot;articles/my-article&quot;);
    when(paramInfo.getPageSize()).thenReturn(10);

    // Set on request
    brxm.setComponentParameters(paramInfo);

    // Execute component
    component.doBeforeRender(brxm.getHstRequest(), brxm.getHstResponse());

    // Assert on model attributes
    MyModel model = brxm.getRequestAttributeValue(&quot;model&quot;);
    assertThat(model).isNotNull();
}
          </code></pre>
        </div>

        </section><section><a id="Request_Parameters"></a>
<h4>Request Parameters</h4>
        
<div class="brush: java">
          
<pre><code>
@Test
void testWithRequestParameters(DynamicComponentTest brxm) {
    // Add request parameters
    brxm.addRequestParameter(&quot;page&quot;, &quot;2&quot;);
    brxm.addRequestParameter(&quot;sort&quot;, &quot;date&quot;);

    component.doBeforeRender(brxm.getHstRequest(), brxm.getHstResponse());
}
          </code></pre>
        </div>
      </section></section></section>

      <section><a id="a6._HTTP_Session_Support"></a>
<h2>6. HTTP Session Support</h2>
        
<div class="brush: java">
          
<pre><code>
@Test
void testWithSession(DynamicComponentTest brxm) {
    // Get or create session (lazy initialization)
    HttpSession session = brxm.getHstRequest().getSession();
    session.setAttribute(&quot;user&quot;, new User(&quot;John&quot;));

    component.doBeforeRender(brxm.getHstRequest(), brxm.getHstResponse());

    // Verify session was used
    assertThat(session.getAttribute(&quot;loginCount&quot;)).isEqualTo(1);
}

// Mock session for more control
@Test
void testWithMockedSession(DynamicComponentTest brxm) {
    HttpSession session = mock(HttpSession.class);
    when(session.getAttribute(&quot;user&quot;)).thenReturn(new User(&quot;Jane&quot;));

    brxm.getHstRequest().setSession(session);

    component.doBeforeRender(brxm.getHstRequest(), brxm.getHstResponse());
}
          </code></pre>
        </div>
        
<p><strong>Session Isolation:</strong> Sessions are automatically invalidated between tests for JAX-RS/PageModel tests.</p>
      </section>

      <section><a id="a7._Production_Config_.28ConfigService.29"></a>
<h2>7. Production Config (ConfigService)</h2>

        <section><section><a id="One-Liner"></a>
<h4>One-Liner</h4>
        
<div class="brush: java">
          
<pre><code>
@BrxmJaxrsTest(
    beanPackages = {&quot;org.example.model&quot;},
    loadProjectContent = true  // Uses HCM modules from classpath
)
          </code></pre>
        </div>

        </section><section><a id="HCM_Structure"></a>
<h4>HCM Structure</h4>
        
<div class="brush: plain">
          
<pre><code>
src/test/resources/
&#x251c;&#x2500;&#x2500; META-INF/
&#x2502;   &#x2514;&#x2500;&#x2500; hcm-module.yaml
&#x251c;&#x2500;&#x2500; hcm-config/
&#x2502;   &#x2514;&#x2500;&#x2500; hst/
&#x2502;       &#x251c;&#x2500;&#x2500; configurations.yaml
&#x2502;       &#x251c;&#x2500;&#x2500; hosts.yaml
&#x2502;       &#x2514;&#x2500;&#x2500; sites.yaml
&#x2514;&#x2500;&#x2500; hcm-content/
    &#x2514;&#x2500;&#x2500; content/
        &#x2514;&#x2500;&#x2500; documents/
          </code></pre>
        </div>

        
<p>See <a href="config-service-repository.html">ConfigService Repository Guide</a> for detailed setup.</p>
      </section></section></section>

    </section>

    <section><a id="Annotation_Parameter_Reference"></a>
<h1>Annotation Parameter Reference</h1>

      <section><a id="a.40BrxmJaxrsTest"></a>
<h2>@BrxmJaxrsTest</h2>
        
<table class="table table-striped">
          
<tr class="a">
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th></tr>
          
<tr class="b">
            
<td><code>beanPackages</code></td>
            
<td>String[]</td>
            
<td>auto-detected</td>
            
<td>HST content bean packages (from project-settings.xml or classpath scan)</td>
          </tr>
          
<tr class="a">
            
<td><code>resources</code></td>
            
<td>Class&lt;?&gt;[]</td>
            
<td>{}</td>
            
<td>JAX-RS resource classes (recommended - eliminates Spring XML)</td>
          </tr>
          
<tr class="b">
            
<td><code>hstRoot</code></td>
            
<td>String</td>
            
<td>auto-detected</td>
            
<td>HST configuration root (from Maven artifactId)</td>
          </tr>
          
<tr class="a">
            
<td><code>springConfigs</code></td>
            
<td>String[]</td>
            
<td>auto-detected</td>
            
<td>Spring XML configs (only for Spring-managed dependencies)</td>
          </tr>
          
<tr class="b">
            
<td><code>yamlPatterns</code></td>
            
<td>String[]</td>
            
<td>auto-detected</td>
            
<td>YAML patterns (from &lt;testPackage&gt;/imports/**/*.yaml)</td>
          </tr>
          
<tr class="a">
            
<td><code>cndPatterns</code></td>
            
<td>String[]</td>
            
<td>{}</td>
            
<td>CND node type definition patterns</td>
          </tr>
          
<tr class="b">
            
<td><code>loadProjectContent</code></td>
            
<td>boolean</td>
            
<td>true</td>
            
<td>Load real HCM modules via ConfigServiceRepository</td>
          </tr>
        </table>
      </section>

      <section><a id="a.40BrxmPageModelTest"></a>
<h2>@BrxmPageModelTest</h2>
        
<table class="table table-striped">
          
<tr class="a">
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th></tr>
          
<tr class="b">
            
<td><code>beanPackages</code></td>
            
<td>String[]</td>
            
<td>auto-detected</td>
            
<td>HST content bean packages</td>
          </tr>
          
<tr class="a">
            
<td><code>hstRoot</code></td>
            
<td>String</td>
            
<td>auto-detected</td>
            
<td>HST configuration root</td>
          </tr>
          
<tr class="b">
            
<td><code>springConfig</code></td>
            
<td>String</td>
            
<td>auto-detected</td>
            
<td>Spring XML config for PageModel pipeline</td>
          </tr>
          
<tr class="a">
            
<td><code>loadProjectContent</code></td>
            
<td>boolean</td>
            
<td>false</td>
            
<td>Load real HCM modules via ConfigServiceRepository</td>
          </tr>
        </table>
      </section>

      <section><a id="a.40BrxmComponentTest"></a>
<h2>@BrxmComponentTest</h2>
        
<table class="table table-striped">
          
<tr class="a">
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th></tr>
          
<tr class="b">
            
<td><code>beanPackages</code></td>
            
<td>String[]</td>
            
<td>auto-detected</td>
            
<td>HST content bean packages</td>
          </tr>
          
<tr class="a">
            
<td><code>nodeTypes</code></td>
            
<td>String[]</td>
            
<td>auto-detected</td>
            
<td>Node types (from @Node annotations in beanPackages)</td>
          </tr>
          
<tr class="b">
            
<td><code>content</code></td>
            
<td>String</td>
            
<td>&quot;&quot;</td>
            
<td>Classpath path to YAML file with test content</td>
          </tr>
          
<tr class="a">
            
<td><code>contentRoot</code></td>
            
<td>String</td>
            
<td>&quot;&quot;</td>
            
<td>JCR path where content is imported + sets site base</td>
          </tr>
        </table>
      </section>

    </section>

    <section><a id="Auto-Detection_Rules"></a>
<h1>Auto-Detection Rules</h1>
      
<table class="table table-striped">
        
<tr class="a">
<th>Setting</th>
<th>Auto-Detection Strategy</th>
<th>Override</th></tr>
        
<tr class="b">
          
<td>Bean Packages</td>
          
<td>1. project-settings.xml<br />2. @Node classpath scan<br />3. pom.xml groupId<br />4. test class package</td>
          
<td><code>beanPackages = {&quot;org.example.beans&quot;}</code></td>
        </tr>
        
<tr class="a">
          
<td>HST Root</td>
          
<td><code>/hst:${artifactId}</code> from pom.xml</td>
          
<td><code>hstRoot = &quot;/hst:customname&quot;</code></td>
        </tr>
        
<tr class="b">
          
<td>Spring Configs</td>
          
<td>JAX-RS: custom-jaxrs.xml, rest-resources.xml<br />PageModel: custom-pagemodel.xml</td>
          
<td><code>springConfigs = {&quot;/path/to/config.xml&quot;}</code></td>
        </tr>
        
<tr class="a">
          
<td>Node Types</td>
          
<td>Scans @Node(jcrType=&quot;...&quot;) in beanPackages</td>
          
<td><code>nodeTypes = {&quot;ns:Type extends ns:Base&quot;}</code></td>
        </tr>
        
<tr class="b">
          
<td>Test YAML</td>
          
<td>&lt;testPackage&gt;/imports/**/*.yaml</td>
          
<td><code>yamlPatterns = {&quot;classpath*:custom/**/*.yaml&quot;}</code></td>
        </tr>
      </table>
    </section>

    <section><a id="Troubleshooting"></a>
<h1>Troubleshooting</h1>
      
<table class="table table-striped">
        
<tr class="a">
<th>Issue</th>
<th>Fix</th></tr>
        
<tr class="b">
          
<td>NullPointerException on <code>brxm</code></td>
          
<td>Use parameter injection: <code>void test(DynamicJaxrsTest brxm)</code></td>
        </tr>
        
<tr class="a">
          
<td>&quot;Missing @BrxmJaxrsTest annotation&quot;</td>
          
<td>Add annotation to test class</td>
        </tr>
        
<tr class="b">
          
<td>&quot;Bean packages: NONE&quot; warning</td>
          
<td>Verify project-settings.xml exists, or add explicit <code>beanPackages</code></td>
        </tr>
        
<tr class="a">
          
<td>Spring config not found</td>
          
<td>Verify file exists, use absolute path starting with <code>/</code></td>
        </tr>
        
<tr class="b">
          
<td>HST root not found</td>
          
<td>Override with <code>hstRoot = &quot;/hst:actualname&quot;</code></td>
        </tr>
        
<tr class="a">
          
<td>IDE &quot;field never assigned&quot; warning</td>
          
<td>Use parameter injection (recommended) or add <code>@SuppressWarnings(&quot;unused&quot;)</code></td>
        </tr>
      </table>
    </section>

  

    </div>
    </div>
    </div>
    <hr/>
    <footer>
    <div class="container-fluid">
      <div class="row-fluid">
          <p class="copyright">Copyright &copy;      2007&#x2013;${currentYear}
              <a href="https://www.bloomreach.com">Bloomreach</a>.
          
</p>
    </div>
            </div>
  </footer>
    </body>
</html>

