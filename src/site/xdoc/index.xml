<?xml version="1.0" encoding="UTF-8"?>
<!--
  Copyright 2024 Bloomreach, Inc (http://www.bloomreach.com)

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
  <properties>
    <title>B.R.U.T. - BloomReach Unit Testing for Delivery Tier</title>
  </properties>
  <body>

    <section name="Introduction">
      <p><strong>BRUT 5.1.0</strong> introduces annotation-based testing for brXM delivery tier with 66-74% less boilerplate
      than legacy abstract classes. Write tests with simple annotations and let BRUT handle the infrastructure.</p>

      <subsection name="Quick Example">
        <div class="brush: java">
          <source><![CDATA[
@BrxmJaxrsTest(resources = {HelloResource.class})
class MyApiTest {

    @Test
    void testEndpoint(DynamicJaxrsTest brxm) {
        brxm.request()
            .get("/site/api/hello/world")
            .assertBody("Hello, World!");
    }
}
          ]]></source>
        </div>
        <p><strong>That's it!</strong> No abstract classes, no 30+ lines of configuration, no lifecycle management.</p>
      </subsection>

      <subsection name="Key Features">
        <ul>
          <li><strong>Zero-Config Auto-Detection</strong> - Bean packages discovered from project structure</li>
          <li><strong>JUnit 5 Parameter Injection</strong> - Test harness injected via <code>@Test</code> method parameters</li>
          <li><strong>Fluent Request API</strong> - Chainable request building with typed responses</li>
          <li><strong>ConfigService Integration</strong> - Production-parity testing with one-liner setup</li>
          <li><strong>Three Test Types</strong> - Components, JAX-RS APIs, and Page Model</li>
        </ul>
      </subsection>
    </section>

    <section name="Module Overview">
      <table>
        <tr><th>Module</th><th>Purpose</th><th>Use For</th></tr>
        <tr>
          <td><strong>brut-common</strong></td>
          <td>In-memory JCR repository, YAML import, JUnit 5 extensions</td>
          <td>Shared infrastructure</td>
        </tr>
        <tr>
          <td><strong>brut-components</strong></td>
          <td>HST Component testing with <code>@BrxmComponentTest</code></td>
          <td><a href="testing/component-testing.html">Component Tests</a></td>
        </tr>
        <tr>
          <td><strong>brut-resources</strong></td>
          <td>JAX-RS and Page Model testing</td>
          <td><a href="testing/jaxrs-testing.html">JAX-RS</a> / <a href="testing/pagemodel-testing.html">Page Model</a></td>
        </tr>
      </table>
    </section>

    <section name="Getting Started">
      <ol>
        <li><a href="install.html">Install Dependencies</a> - Add BRUT to your project</li>
        <li><a href="getting-started.html">Quick Start</a> - Write your first test</li>
        <li><a href="quick-reference.html">Quick Reference</a> - Annotation options and API reference</li>
      </ol>
    </section>

    <section name="Testing Guides">
      <table>
        <tr><th>Guide</th><th>Description</th></tr>
        <tr>
          <td><a href="testing/jaxrs-testing.html">JAX-RS Testing</a></td>
          <td>Test REST endpoints with fluent request builder</td>
        </tr>
        <tr>
          <td><a href="testing/pagemodel-testing.html">Page Model Testing</a></td>
          <td>Test Page Model API with JSON response parsing</td>
        </tr>
        <tr>
          <td><a href="testing/component-testing.html">Component Testing</a></td>
          <td>Test HST components in isolation</td>
        </tr>
        <tr>
          <td><a href="testing/stubbing-data.html">Test Data (YAML)</a></td>
          <td>Create focused test content</td>
        </tr>
      </table>
    </section>

    <section name="Patterns and Reference">
      <table>
        <tr><th>Resource</th><th>Description</th></tr>
        <tr>
          <td><a href="patterns/authentication.html">Authentication Patterns</a></td>
          <td>Test authenticated users and roles</td>
        </tr>
        <tr>
          <td><a href="patterns/common-patterns.html">Common Patterns</a></td>
          <td>Mocking, assertions, naming conventions</td>
        </tr>
        <tr>
          <td><a href="config-service-repository.html">ConfigService Repository</a></td>
          <td>Production-parity HST configuration</td>
        </tr>
        <tr>
          <td><a href="architecture.html">Architecture</a></td>
          <td>How BRUT works</td>
        </tr>
        <tr>
          <td><a href="troubleshooting.html">Troubleshooting</a></td>
          <td>Common issues and fixes</td>
        </tr>
        <tr>
          <td><a href="legacy-api.html">Legacy API</a></td>
          <td>Abstract class approach (still supported)</td>
        </tr>
      </table>
    </section>

  </body>
</document>
